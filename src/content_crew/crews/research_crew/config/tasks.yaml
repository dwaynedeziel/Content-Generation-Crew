competitor_audit_task:
  description: >
    Research the top-ranking content for the seed topic "{seed_topic}" in the {industry} industry.
    
    Perform web searches for EACH of these patterns:
    - "{seed_topic} best practices"
    - "{seed_topic} guide"  
    - "{seed_topic} vs"
    - "how to {seed_topic}"
    - "{seed_topic} mistakes"
    - "{seed_topic} tools"
    - "{seed_topic} statistics"
    - "{seed_topic} tips for beginners"
    
    For each search, document:
    1. The top 3-5 ranking pages (title, URL, what they cover)
    2. Content gaps â€” topics competitors miss or cover poorly
    3. SERP features present (featured snippets, People Also Ask boxes, knowledge panels)
    4. Content types that rank well (guides, listicles, how-tos, etc.)
    
    Be thorough. This research forms the foundation of the entire content strategy.
  expected_output: >
    A comprehensive competitor audit report containing:
    - Summary of top-ranking content for each search pattern
    - List of identified content gaps and underserved topics
    - SERP feature opportunities mapped to specific queries
    - Content type analysis (what formats rank best)
    - At least 30 raw keyword/topic ideas extracted from research
  agent: seo_research_strategist

keyword_research_task:
  description: >
    Using the competitor audit results, conduct deeper keyword research for "{seed_topic}".
    
    Search for:
    - Long-tail keyword variations
    - Question-based queries (how, what, why, when, where, which)
    - Comparison queries ("{seed_topic} vs X")
    - Commercial intent queries ("best {seed_topic}", "{seed_topic} tools", "{seed_topic} services")
    - "{seed_topic} trends 2026"
    - "{seed_topic} case studies"
    
    For each keyword cluster, assess:
    - Search intent (informational, commercial, transactional, navigational)
    - Competition level (low, medium, high) based on what types of sites rank
    - Content type that would best serve this query
    - Related entities and topics that should be mentioned
  expected_output: >
    A structured keyword research report containing:
    - Primary keywords grouped by intent
    - Secondary/long-tail variations for each primary keyword
    - Question queries mapped to potential FAQ content
    - Competition assessment per keyword cluster
    - Recommended content types per keyword group
    - Target entities and related topics for each cluster
  agent: seo_research_strategist

topic_map_generation_task:
  description: >
    Using the competitor audit and keyword research, build a complete topic map for "{seed_topic}".
    
    Structure requirements:
    - 1-3 Pillar topics (comprehensive, high-level guides)
    - 5-8 Cluster topics per pillar (focused subtopics)
    - Supporting topics to fill remaining gaps
    - Target 15-20 TOTAL topics
    
    For EACH topic, determine ALL of these fields:
    - topic_level: pillar, cluster, or supporting
    - parent_cluster: which pillar/cluster this belongs to (empty for pillars)
    - topic_name: descriptive name
    - primary_keyword: main target keyword
    - secondary_keywords: pipe-separated list of 3-5 secondary keywords
    - search_intent: informational, commercial, transactional, or navigational
    - content_type: guide, listicle, how-to, comparison, case-study, pillar-page, FAQ, or tutorial
    - word_count_min: minimum word count
    - word_count_max: maximum word count
    - target_entities: pipe-separated list of entities/brands/concepts to mention
    - questions_to_answer: pipe-separated list of 3-5 questions this content should answer
    - information_gain_opportunity: what unique angle or data this piece can offer
    - rag_optimization_notes: how to structure for AI extraction
    - internal_link_targets: pipe-separated topic names from THIS map that should be linked
    - priority_score: 1-10 (10 = highest priority)
    - competition_level: low, medium, or high
    - serp_features_opportunity: pipe-separated (featured-snippet, people-also-ask, knowledge-panel)
    
    Generate the complete CSV content with the header row first, then all topic rows.
    Sort: pillar topics first, then by priority_score descending.
    
    Use the csv_writer tool to save the CSV to: {output_dir}/topic_maps/{seed_topic} - {date}.csv
    
    Client context for voice/tone alignment:
    - Client: {client_name}
    - Industry: {industry}
    - Business: {business_summary}
  expected_output: >
    1. The complete CSV file written to disk via the csv_writer tool.
    2. A summary report containing:
       - Total topic count by level (pillar/cluster/supporting)
       - Top 5 priority topics with their scores
       - Intent distribution (how many informational vs commercial vs transactional)
       - Competition spread (how many low vs medium vs high)
       - Recommended production order
  agent: topic_map_architect
